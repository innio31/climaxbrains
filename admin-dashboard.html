<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-purple: #6a0dad;
            --secondary-wine: #722f37;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .logout-btn {
            background: var(--secondary-wine);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        /* Add your dashboard styles here */
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 style="color: var(--primary-purple);">
                <i class="fas fa-user-shield"></i> Admin Dashboard
            </h1>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </header>
        
        <!-- Dashboard content will load here -->
        <div id="dashboardContent"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script>
        // Firebase config
        const firebaseConfig = {
  apiKey: "AIzaSyDuKgSUZejLLveOe8oXlHo64OnCDFvwPc4",
  authDomain: "climax-brains-academy-cbt.firebaseapp.com",
  projectId: "climax-brains-academy-cbt",
  storageBucket: "climax-brains-academy-cbt.firebasestorage.app",
  messagingSenderId: "1024257040553",
  appId: "1:1024257040553:web:3cc25d238fa378358f09b8",
  measurementId: "G-LVDHYESXJG"
};

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();

        // Check authentication
        if (sessionStorage.getItem('isAdminAuthenticated') !== 'true') {
            window.location.href = 'admin-login.html';
        }

        // Logout handler
        document.getElementById('logoutBtn').addEventListener('click', function() {
            sessionStorage.removeItem('isAdminAuthenticated');
            window.location.href = 'admin-login.html';
        });

        // Load data from Firestore
        function loadData() {
            db.collection("examResults").get()
                .then((querySnapshot) => {
                    const results = [];
                    querySnapshot.forEach((doc) => {
                        results.push(doc.data());
                    });
                    renderDashboard(results);
                })
                .catch((error) => {
                    console.error("Error loading data: ", error);
                });
        }

        function renderDashboard(data) {
            // Your dashboard rendering code here
            document.getElementById('dashboardContent').innerHTML = `
                <h3>Recent Exam Results (${data.length})</h3>
                <pre>${JSON.stringify(data.slice(0, 5), null, 2)}</pre>
                <p>Full data loaded in console</p>
            `;
            console.log("All results:", data);
        }

        // Initial load
        loadData();
    </script>
</body>
</html>
